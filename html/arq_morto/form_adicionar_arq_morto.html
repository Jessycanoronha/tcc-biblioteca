<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title> Adicionando Livros do Arquivo Morto ao Cadastro | Qg da Leitura </title>
  <link rel="stylesheet" href="../../css/style_form.css">
</head>
<body>
<div class="interface">
	<button class="bt-voltar" onclick="window.location.href = 'menu_arquivo_morto.html'"> Menu </button>

	<h1> Adicionar livro de arquivo morto ao cadastro </h1>
	<form method="post" class="form_adicionar" onsubmit="return validar()" action="../../php/arq_morto/adicionar_livro.php">
		<fieldset>
    	<fieldset>
        	<legend> Informações do livro </legend>
	            <div>
	                <label> Título </label>
	                <input type="text" placeholder="Digite o título do livro" name="titulo" maxlength="35" autofocus id="titulo" required>
	            </div>
	            <div>
	                <label> Autor </label>
	                <input type="text" placeholder="Digite o autor do livro" name="autor" maxlength="35" id="autor" required>
	            </div>
	            <div>
	                <label> Editora </label>
	                <input type="text" placeholder="Digite a editora do livro" name="editora" maxlength="35" id="editora" required>
	            </div>
	    </fieldset>
	    <fieldset>
	        <legend> Arquivo Morto </legend>
	            <div>
	                 <label> Gaveta </label>
	                 <input type="number" name="gaveta" min="0" value="0" maxlength="2" id="gaveta">
	            </div>
	            <div>
	                 <label> Livro </label>
	                 <input type="number" name="livro" min="0" value="0" maxlength="3" id="livro">
	            </div>
	    </fieldset>
	        <div>
	            <label> Estoque </label>
	            <input type="number" name="estoque" min="0" placeholder="Estoque" value="1" required id="estoque">
	        </div>
          <div>
              <button type="button" class="bt confirm" id="btn-confirm"> Confirmar </button>
              <button type="button" class="bt alert" id="btn-reset"> Resetar </button>
          </div>
	</fieldset>
	</form>
  <div class="resposta">
    <p id="resposta">  </p>
  </div>
  <script>
    "use strict";
    let btn_conf = document.getElementById("btn-confirm"),
        btn_reset = document.getElementById("btn-reset");

    btn_conf.addEventListener("click", function() {
      // Recuperando os dados dos formulários
      var titulo  = document.getElementById("titulo").value,
          autor = document.getElementById("autor").value,
          editora = document.getElementById("editora").value,
          gaveta = document.getElementById("gaveta").value,
          livro = document.getElementById("livro").value,
          estoque = document.getElementById("estoque").value;

      // Realizando a requisição ajax
      var http = new XMLHttpRequest();

      http.onreadystatechange = function() {
        if (http.readyState == 4 && http.status == 200) {
          var resposta = http.responseText;
          document.getElementsByClassName("resposta")[0].style.display = "block";
          document.getElementById("resposta").innerHTML = resposta;
        } else {
          document.getElementsByClassName("resposta")[0].style.display = "block";
          document.getElementById("resposta").innerHTML = "Carregando";
        }
      }

      http.open("GET", "http://127.0.0.1/tcc-biblioteca/php/arq_morto/adicionar_livro.php?titulo=" + titulo + "&autor=" + autor + "&editora=" + editora + "&gaveta=" + gaveta + "&livro=" + livro + "&estoque=" + estoque, true);
      http.send(null);

      });

    btn_reset.addEventListener("click", function() {
      // "Limpando" os campos
      document.getElementById("titulo").value = "",
      document.getElementById("autor").value = "",
      document.getElementById("editora").value = "",
      document.getElementById("gaveta").value = "",
      document.getElementById("livro").value = "",
      document.getElementById("estoque").value = "";
      document.getElementsByClassName("resposta")[0].style.display = "none";
      document.getElementById("resposta").innerHTML = "";
    });
  </script>
  </div>
</body>
</html>
