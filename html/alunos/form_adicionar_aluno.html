<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="utf-8">
  <title> Adicionando Alunos ao Cadastro | Qg da Leitura </title>
  <link rel="stylesheet" href="../../css/style_form.css">
</head>
<body>
<div class="interface">
  <a class="bt-voltar" href="menu_aluno.html"> Menu </a>

  <h1> Adicionar aluno ao cadastro </h1>

  <form class="form_adicionar">
      <fieldset>
          <legend> Informações pessoais </legend>
          <div>
             <label for="nome">Nome: </label>
             <input type="text" name="nome" placeholder="Digite o nome do aluno" maxlength="35" autofocus id="nome" required>
          </div>
          <div>
             <label for="turma">Turma:</label>
             <input type="number" name="turma" placeholder="Turma" id="turma" min="1000" required maxlength="4">
          </div>
          <div>
              <button type="button" class="bt confirm" id="btn-confirm"> Confirmar </button>
              <button type="button" class="bt alert" id="btn-reset"> Resetar </button>
          </div>
      </fieldset>
  </form>
  <div class="resposta">
    <p id="resposta">  </p>
  </div>
  <script>
    "use strict";
    let btn_conf = document.getElementById("btn-confirm"),
        btn_reset = document.getElementById("btn-reset");

    btn_conf.addEventListener("click", function() {
      // Recuperando os dados dos formulários
      var nome  = document.getElementById("nome").value,
          turma = document.getElementById("turma").value;

      // Realizando a requisição ajax
      var http = new XMLHttpRequest();

      http.onreadystatechange = function() {
        if (http.readyState == 4 && http.status == 200) {
          var resposta = http.responseText;
          document.getElementsByClassName("resposta")[0].style.display = "block";
          document.getElementById("resposta").innerHTML = resposta;
        } else {
          document.getElementsByClassName("resposta")[0].style.display = "block";
          document.getElementById("resposta").innerHTML = "Carregando";
        }
      }

      http.open("GET", "http://127.0.0.1/tcc-biblioteca/php/arq_alunos/adicionar_aluno.php?nome=" + nome + "&turma=" + turma, true);
      http.send(null);

      });

    btn_reset.addEventListener("click", function() {
      // "Limpando" os campos
      document.getElementById("nome").value = "";
      document.getElementById("turma").value = "";
      document.getElementsByClassName("resposta")[0].style.display = "none";
      document.getElementById("resposta").innerHTML = "";
    });
  </script>
  </div>
</body>
</html>
